# AWS データプラットフォーム ベストプラクティス

## S3 パーティション設計
- 時間やドメインでの高カーディナリティ分割（例: `dt=YYYY-MM-DD`）。
- クエリのフィルタ条件に合わせた分割でスキャン量を削減。
- 過度な小分割を避け、サイズと効率のバランスを取る。

## Redshift モデリング
- Fact/Dimensionの分離を前提にスター・スキーマを優先。
- クエリパターンと結合経路に基づいて sort/dist key を選定。
- 重複を避けるため late-binding view や external schema を適切に利用。

## Glue ETL 設計
- 変換はモジュール化し再利用可能にする。
- スキーマ変更の検証とデータ契約を徹底。
- ジョブブックマークや独自管理でインクリメンタル処理を行う。

## Incremental Pipeline
- 最終処理位置を管理する制御テーブルやメタデータを利用。
- merge/upsert で冪等性を担保。
- 遅延到着データはバックフィルウィンドウで補正。

## スケーラブルな構成
- Raw/Core/Mart をS3とRedshiftで分離。
- パーティションプルーニング、圧縮、Parquetを活用。
- コスト/性能を監視し、メトリクスとアラートを設計。
